/**
 * // This is the Master's API interface.
 * // You should not implement it, or speculate about its implementation
 * interface Master {
 *     public int guess(String word) {}
 * }
 */
class Solution {

    // Counts exact character matches at same positions
    private int matchCount(String a, String b) {
        int count = 0;
        for (int i = 0; i < 6; i++) {
            if (a.charAt(i) == b.charAt(i)) {
                count++;
            }
        }
        return count;
    }

    public void findSecretWord(String[] words, Master master) {
        List<String> candidates = new ArrayList<>(Arrays.asList(words));
        Random rand = new Random();

        for (int attempt = 0; attempt < 30; attempt++) {
            // Pick a candidate to guess
            String guess = candidates.get(rand.nextInt(candidates.size()));
            int matches = master.guess(guess);

            // If all characters match, we found the secret
            if (matches == 6) return;

            // Filter candidates using feedback
            List<String> nextCandidates = new ArrayList<>();
            for (String word : candidates) {
                if (matchCount(guess, word) == matches) {
                    nextCandidates.add(word);
                }
            }

            candidates = nextCandidates;
        }
    }
}
